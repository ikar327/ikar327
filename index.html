<!DOCTYPE html>

<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stronghold Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }


    body {
        font-family: -apple-system, sans-serif;
        background: #111;
        color: #fff;
        padding: 12px;
        max-width: 420px;
        margin: 0 auto;
        font-size: 15px;
    }
    
    h1 {
        text-align: center;
        color: #5f8;
        font-size: 1.4em;
        margin-bottom: 15px;
    }
    
    .tabs {
        display: flex;
        gap: 4px;
        margin-bottom: 12px;
    }
    
    .tab {
        flex: 1;
        padding: 10px;
        background: #222;
        border: none;
        border-radius: 6px;
        color: #777;
        font-weight: 600;
        font-size: 0.85em;
    }
    
    .tab.active { background: #5f8; color: #111; }
    
    .panel { display: none; }
    .panel.active { display: block; }
    
    .box {
        background: #1a1a1a;
        border-radius: 10px;
        padding: 14px;
        margin-bottom: 12px;
    }
    
    .box h2 {
        color: #5f8;
        font-size: 1em;
        margin-bottom: 12px;
        border-bottom: 1px solid #333;
        padding-bottom: 8px;
    }
    
    /* Paste area */
    .paste-area {
        background: #0a0a0a;
        border: 2px dashed #333;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .paste-area:hover, .paste-area:focus {
        border-color: #5f8;
        background: #111;
    }
    
    .paste-area.success {
        border-color: #5f8;
        background: rgba(85, 255, 136, 0.1);
    }
    
    .paste-area .icon { font-size: 1.5em; margin-bottom: 5px; }
    .paste-area .text { color: #888; font-size: 0.85em; }
    .paste-area .hint { color: #555; font-size: 0.75em; margin-top: 5px; }
    
    /* Position boxes */
    .pos-box {
        background: #111;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 10px;
        border-left: 3px solid #48f;
    }
    
    .pos-box.second { border-left-color: #4c5; }
    
    .pos-box h3 {
        color: #ccc;
        font-size: 0.85em;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .pos-box .paste-btn {
        background: #333;
        border: none;
        color: #888;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75em;
        cursor: pointer;
    }
    
    .pos-box .paste-btn:hover { background: #444; color: #fff; }
    
    .inputs {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 6px;
    }
    
    .inputs label {
        display: block;
        color: #666;
        font-size: 0.7em;
        margin-bottom: 3px;
    }
    
    .inputs input {
        width: 100%;
        padding: 10px 6px;
        background: #000;
        border: 1px solid #333;
        border-radius: 5px;
        color: #fff;
        font-size: 0.95em;
        text-align: center;
    }
    
    .inputs input:focus {
        outline: none;
        border-color: #5f8;
    }
    
    .btn {
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 8px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
    }
    
    .btn-go { background: #5f8; color: #111; }
    .btn-clear { background: #222; color: #888; margin-top: 8px; font-size: 0.9em; }
    
    .error {
        display: none;
        background: #411;
        border: 1px solid #f44;
        border-radius: 6px;
        padding: 10px;
        margin-top: 10px;
        color: #f88;
        text-align: center;
        font-size: 0.9em;
    }
    
    .error.show { display: block; }
    
    /* Results */
    .results {
        display: none;
        background: linear-gradient(135deg, #132, #123);
        border: 2px solid #5f8;
        border-radius: 10px;
        padding: 14px;
        margin-top: 12px;
    }
    
    .results.show { display: block; }
    
    .results h3 {
        text-align: center;
        color: #5f8;
        margin-bottom: 12px;
    }
    
    .res-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
    }
    
    .res-item {
        background: rgba(0,0,0,0.4);
        border-radius: 6px;
        padding: 10px;
        text-align: center;
    }
    
    .res-item.full { grid-column: 1 / -1; }
    
    .res-label { color: #888; font-size: 0.7em; }
    .res-val { color: #5f8; font-size: 1.3em; font-weight: bold; font-family: monospace; }
    .res-val.nether { color: #f66; }
    .res-val.sm { font-size: 1em; }
    
    .copy-btn {
        width: 100%;
        padding: 10px;
        background: #222;
        border: 1px solid #444;
        border-radius: 6px;
        color: #fff;
        margin-top: 10px;
        cursor: pointer;
        font-size: 0.9em;
    }
    
    /* Instructions */
    .step {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        padding: 10px;
        background: #111;
        border-radius: 6px;
    }
    
    .step-n {
        background: #48f;
        color: #fff;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75em;
        font-weight: bold;
        flex-shrink: 0;
    }
    
    .step-t { flex: 1; font-size: 0.9em; }
    .step-t strong { color: #5f8; }
    
    .tip {
        background: #221;
        border-radius: 4px;
        padding: 6px;
        margin-top: 6px;
        font-size: 0.8em;
        color: #ca0;
    }
    
    .info {
        background: #111;
        border-radius: 6px;
        padding: 10px;
        margin: 8px 0;
        font-size: 0.85em;
    }
    
    .info code {
        background: #000;
        padding: 2px 5px;
        border-radius: 3px;
        color: #5f8;
    }
    
    /* Table */
    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.8em;
        margin-top: 8px;
    }
    
    th, td {
        padding: 7px;
        text-align: center;
        border: 1px solid #333;
    }
    
    th { background: #222; color: #5f8; }
    tr:nth-child(even) { background: #151515; }
</style>


</head>
<body>

<h1>üîÆ Stronghold Calculator</h1>

<div class="tabs">
    <button class="tab active" onclick="showTab('calc')">Kalkulator</button>
    <button class="tab" onclick="showTab('help')">Instrukcja</button>
    <button class="tab" onclick="showTab('table')">Tabela</button>
</div>

<!-- KALKULATOR -->

<div id="calc" class="panel active">
    <div class="box">
        <h2>üìç Wklej dane z Minecraft</h2>


    <div class="paste-area" id="pasteArea" tabindex="0" onclick="this.focus()">
        <div class="icon">üìã</div>
        <div class="text">Kliknij i wci≈õnij <strong>Ctrl+V</strong></div>
        <div class="hint">W grze: F3+C kopiuje pozycjƒô</div>
    </div>
    
    <div class="pos-box">
        <h3>
            <span>1Ô∏è‚É£ Pierwszy rzut</span>
            <button class="paste-btn" onclick="pasteToPos(1)">üìã Wklej</button>
        </h3>
        <div class="inputs">
            <div><label>X</label><input type="text" id="x1" inputmode="text"></div>
            <div><label>Z</label><input type="text" id="z1" inputmode="text"></div>
            <div><label>Yaw</label><input type="text" id="yaw1" inputmode="text"></div>
        </div>
    </div>
    
    <div class="pos-box second">
        <h3>
            <span>2Ô∏è‚É£ Drugi rzut</span>
            <button class="paste-btn" onclick="pasteToPos(2)">üìã Wklej</button>
        </h3>
        <div class="inputs">
            <div><label>X</label><input type="text" id="x2" inputmode="text"></div>
            <div><label>Z</label><input type="text" id="z2" inputmode="text"></div>
            <div><label>Yaw</label><input type="text" id="yaw2" inputmode="text"></div>
        </div>
    </div>
    
    <button class="btn btn-go" onclick="calculate()">üîÆ OBLICZ STRONGHOLD</button>
    <button class="btn btn-clear" onclick="clearAll()">Wyczy≈õƒá</button>
    
    <div class="error" id="err"></div>
    
    <div class="results" id="res">
        <h3>üìç Stronghold</h3>
        <div class="res-grid">
            <div class="res-item">
                <div class="res-label">X</div>
                <div class="res-val" id="rX">-</div>
            </div>
            <div class="res-item">
                <div class="res-label">Z</div>
                <div class="res-val" id="rZ">-</div>
            </div>
            <div class="res-item">
                <div class="res-label">Dystans</div>
                <div class="res-val sm" id="rD">-</div>
            </div>
            <div class="res-item">
                <div class="res-label">Nether</div>
                <div class="res-val sm nether" id="rN">-</div>
            </div>
            <div class="res-item full">
                <div class="res-label">üéØ Schody (4,4) - TU KOP!</div>
                <div class="res-val sm" id="rS">-</div>
            </div>
        </div>
        <button class="copy-btn" onclick="copyTP()">üìã Kopiuj /tp</button>
    </div>
</div>


</div>

<!-- INSTRUKCJA -->

<div id="help" class="panel">
    <div class="box">
        <h2>üìñ Jak u≈ºywaƒá (F3+C)</h2>


    <div class="step">
        <div class="step-n">1</div>
        <div class="step-t">
            <strong>Rzuƒá Eye of Ender</strong> i NIE ruszaj siƒô!
        </div>
    </div>
    
    <div class="step">
        <div class="step-n">2</div>
        <div class="step-t">
            <strong>Wyceluj dok≈Çadnie w ≈õrodek oka</strong> gdy jest najwy≈ºej
        </div>
    </div>
    
    <div class="step">
        <div class="step-n">3</div>
        <div class="step-t">
            Naci≈õnij <strong>F3+C</strong> (przytrzymaj 3 sek.)
            <div class="tip">Skopiuje pozycjƒô i kƒÖt do schowka!</div>
        </div>
    </div>
    
    <div class="step">
        <div class="step-n">4</div>
        <div class="step-t">
            Wejd≈∫ tu i <strong>Ctrl+V</strong> - dane wklejƒÖ siƒô automatycznie
        </div>
    </div>
    
    <div class="step">
        <div class="step-n">5</div>
        <div class="step-t">
            <strong>Obr√≥ƒá siƒô o 90¬∞</strong> i przejd≈∫ <strong>17.5 blok√≥w</strong>
            <div class="tip">Mo≈ºesz i≈õƒá dalej (50-100 bl) dla wiƒôkszej dok≈Çadno≈õci</div>
        </div>
    </div>
    
    <div class="step">
        <div class="step-n">6</div>
        <div class="step-t">
            Powt√≥rz rzut i <strong>F3+C</strong>, wklej dane
        </div>
    </div>
    
    <div class="step">
        <div class="step-n">7</div>
        <div class="step-t">
            Kliknij <strong>OBLICZ</strong> - gotowe!
        </div>
    </div>
</div>

<div class="box">
    <h2>üéÆ Format F3+C</h2>
    <div class="info">
        F3+C kopiuje tekst w formacie:<br><br>
        <code>/execute in minecraft:overworld run tp @s 123.45 64.00 -789.12 45.67 -12.34</code><br><br>
        Gdzie:<br>
        ‚Ä¢ <strong>123.45</strong> = X<br>
        ‚Ä¢ <strong>-789.12</strong> = Z<br>
        ‚Ä¢ <strong>45.67</strong> = Yaw (kƒÖt poziomy)
    </div>
</div>

<div class="box">
    <h2>üß≠ Rƒôczne odczytywanie</h2>
    <div class="info">
        Je≈õli F3+C nie dzia≈Ça, naci≈õnij <strong>F3</strong> i znajd≈∫:<br><br>
        <code>Facing: south (45.67 / -12.34)</code><br><br>
        Yaw = <strong>45.67</strong> (pierwsza liczba w nawiasie)
    </div>
</div>


</div>

<!-- TABELA -->

<div id="table" class="panel">
    <div class="box">
        <h2>üìã Metoda 17.5 blok√≥w</h2>

    <div class="info">
        1. Rzuƒá oko, zapisz kƒÖt<br>
        2. Obr√≥ƒá siƒô o 90¬∞ i id≈∫ 17.5 blok√≥w<br>
        3. Rzuƒá drugie oko<br>
        4. R√≥≈ºnica kƒÖt√≥w ‚Üí dystans w tabeli
    </div>
    
    <table>
        <tr><th>Œî KƒÖt</th><th>Dystans</th><th>Nether</th></tr>
        <tr><td>0.5¬∞</td><td>2005</td><td>251</td></tr>
        <tr><td>1.0¬∞</td><td>1003</td><td>125</td></tr>
        <tr><td>1.5¬∞</td><td>669</td><td>84</td></tr>
        <tr><td>2.0¬∞</td><td>501</td><td>63</td></tr>
        <tr><td>2.5¬∞</td><td>401</td><td>50</td></tr>
        <tr><td>3.0¬∞</td><td>334</td><td>42</td></tr>
        <tr><td>4.0¬∞</td><td>251</td><td>31</td></tr>
        <tr><td>5.0¬∞</td><td>201</td><td>25</td></tr>
        <tr><td>6.0¬∞</td><td>167</td><td>21</td></tr>
        <tr><td>7.0¬∞</td><td>144</td><td>18</td></tr>
        <tr><td>8.0¬∞</td><td>126</td><td>16</td></tr>
        <tr><td>9.0¬∞</td><td>112</td><td>14</td></tr>
        <tr><td>10.0¬∞</td><td>101</td><td>13</td></tr>
    </table>
</div>


</div>

<script>
let currentPos = 1;

function showTab(id) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById(id).classList.add('active');
}

// Parse F3+C format: /execute in minecraft:overworld run tp @s X Y Z YAW PITCH
function parseF3C(text) {
    const match = text.match(/tp\s+@s\s+([-\d.]+)\s+([-\d.]+)\s+([-\d.]+)\s+([-\d.]+)\s+([-\d.]+)/);
    if (match) {
        return {
            x: parseFloat(match[1]),
            y: parseFloat(match[2]),
            z: parseFloat(match[3]),
            yaw: parseFloat(match[4]),
            pitch: parseFloat(match[5])
        };
    }
    return null;
}

// Global paste handler
document.addEventListener('paste', function(e) {
    const text = e.clipboardData.getData('text');
    const data = parseF3C(text);
    
    if (data) {
        document.getElementById('x' + currentPos).value = data.x.toFixed(2);
        document.getElementById('z' + currentPos).value = data.z.toFixed(2);
        document.getElementById('yaw' + currentPos).value = data.yaw.toFixed(2);
        
        const area = document.getElementById('pasteArea');
        area.classList.add('success');
        area.querySelector('.text').innerHTML = `‚úÖ Pozycja ${currentPos} wklejona!`;
        
        currentPos = currentPos === 1 ? 2 : 1;
        
        setTimeout(() => {
            area.classList.remove('success');
            area.querySelector('.text').innerHTML = `Kliknij i wci≈õnij <strong>Ctrl+V</strong> (pozycja ${currentPos})`;
        }, 1500);
    }
});

async function pasteToPos(pos) {
    try {
        const text = await navigator.clipboard.readText();
        const data = parseF3C(text);
        
        if (data) {
            document.getElementById('x' + pos).value = data.x.toFixed(2);
            document.getElementById('z' + pos).value = data.z.toFixed(2);
            document.getElementById('yaw' + pos).value = data.yaw.toFixed(2);
            
            event.target.textContent = '‚úÖ OK!';
            setTimeout(() => event.target.textContent = 'üìã Wklej', 1000);
        } else {
            event.target.textContent = '‚ùå B≈ÇƒÖd';
            setTimeout(() => event.target.textContent = 'üìã Wklej', 1000);
        }
    } catch(e) {
        alert('Kliknij w g≈Ç√≥wne pole i u≈ºyj Ctrl+V');
    }
}

function calculate() {
    const g = id => parseFloat(document.getElementById(id).value);
    const x1 = g('x1'), z1 = g('z1'), yaw1 = g('yaw1');
    const x2 = g('x2'), z2 = g('z2'), yaw2 = g('yaw2');
    
    if ([x1,z1,yaw1,x2,z2,yaw2].some(isNaN)) {
        showErr('Wype≈Çnij wszystkie pola!');
        return;
    }
    
    const r1 = yaw1 * Math.PI / 180;
    const r2 = yaw2 * Math.PI / 180;
    
    const dx1 = -Math.sin(r1), dz1 = Math.cos(r1);
    const dx2 = -Math.sin(r2), dz2 = Math.cos(r2);
    
    const det = dx1 * dz2 - dz1 * dx2;
    
    if (Math.abs(det) < 0.00001) {
        showErr('KƒÖty identyczne! Przesu≈Ñ siƒô trochƒô w bok.');
        return;
    }
    
    const t = ((x2-x1)*dz2 - (z2-z1)*dx2) / det;
    
    if (t < 0) {
        showErr('B≈ÇƒÖd - sprawd≈∫ czy celowa≈Çe≈õ w oko!');
        return;
    }
    
    const sx = x1 + t * dx1;
    const sz = z1 + t * dz1;
    const dist = Math.sqrt((sx-x2)**2 + (sz-z2)**2);
    
    const chX = Math.floor(sx/16)*16 + 4;
    const chZ = Math.floor(sz/16)*16 + 4;
    
    document.getElementById('rX').textContent = Math.round(sx);
    document.getElementById('rZ').textContent = Math.round(sz);
    document.getElementById('rD').textContent = Math.round(dist) + ' bl';
    document.getElementById('rN').textContent = Math.round(dist/8) + ' bl';
    document.getElementById('rS').textContent = `X: ${chX}  Z: ${chZ}`;
    
    document.getElementById('res').classList.add('show');
    document.getElementById('err').classList.remove('show');
}

function copyTP() {
    const x = document.getElementById('rX').textContent;
    const z = document.getElementById('rZ').textContent;
    navigator.clipboard.writeText(`/tp @p ${x} ~ ${z}`);
    event.target.textContent = '‚úÖ Skopiowano!';
    setTimeout(() => event.target.textContent = 'üìã Kopiuj /tp', 1500);
}

function clearAll() {
    ['x1','z1','yaw1','x2','z2','yaw2'].forEach(id => document.getElementById(id).value = '');
    document.getElementById('res').classList.remove('show');
    document.getElementById('err').classList.remove('show');
    currentPos = 1;
    document.getElementById('pasteArea').querySelector('.text').innerHTML = 'Kliknij i wci≈õnij <strong>Ctrl+V</strong>';
}

function showErr(msg) {
    const e = document.getElementById('err');
    e.textContent = msg;
    e.classList.add('show');
    document.getElementById('res').classList.remove('show');
}
</script>

</body>
</html>
